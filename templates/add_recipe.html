{% extends 'index.html' %}

{% block content %}

    <h3>Your new recipe:</h3>
    <div>
        <form method="post">
            <div>
                <input required type="text" name="name_recipe" placeholder="Name of the recipe">
            </div>
            <div>
                <label>number of servings</label>
                <button class="button_del_serving" type="button"> - </button>
                <input readonly class="input_number_of_serving" min='0' type="number" value="1" step="1" name="number_of_serving">
                <button class="button_add_serving" type="button"> + </button>
            </div>
            <div>
                <label>cooking time</label>
                <div>
                    <input min='0' type="number" value="0" step="1" name="cooking_hour"><p>hours</p>
                </div>
                <div>
                    <input min='1' type="number" value="0" step="1" name="cooking_minute"><p>minutes</p>
                </div>
            </div>
            <div>
                <label>addition</label>
                <input type="text" name="addition">
            </div>
            <div>
                <h4>Ingredients</h4>
                <div>
                    <label>Name of the ingredient</label>
                    <input type="text" name="name_ingredient">
                </div>
                <div>
                    <label>Quantity</label>
                    <input min='0' type="number" name="quantity_ingredient">
                </div>
                <div>
                    <label>Measure unit</label>
                    <select name="measure_unit">
                        <option value="g">g</option>
                        <option value="kg">kg</option>
                        <option value="ml">ml</option>
                        <option value="liter(s)">liter(s)</option>
                        <option value="tbsp">tbsp</option>
                        <option value="glass">glass</option>
                        <option value="tsp">tsp</option>
                    </select>
                </div>
            </div>
            <div class="block_to_add">
                <h4>Step-by-step instructions</h4>
                <div class="step">
                    <div class=step_div>
                        <span class="step_span">Step 1</span>
                    </div>
                    <div>
                        <label>Image</label>
                        <input type="file" accept="image/*" name="image_step[]">
                    </div>
                    <div>
                        <label>Text</label>
                        <input type="text" name="text_step[]">
                    </div>
                </div>
            </div>

            <button type="submit">Send</button>
        </form>
    </div>
        <script type="text/javascript">
            $(document).ready(function() {
                var count = 1;

                $(".button_add_step").click(function(e) {
                    e.preventDefault();
                    count++;
                    $('.block_to_add').append('                <div class="step">\n' +
            '                    <div class=step_div>' +
            '                        <span class="step_span" >Step ' + count + '</span>' +
            '                    </div>' +
            '                    <div>\n' +
            '                        <label>Image</label>\n' +
            '                        <input type="file" accept="image/*" name="image_step[]">\n' +
            '                    </div>\n' +
            '                    <div>\n' +
            '                        <label>Text</label>\n' +
            '                        <input type="text" name="text_step[]">\n' +
            '                    </div><button type="button" class="remove_button">Удалить</button>\n' +
            '                </div>');
                });

                $('.block_to_add').on('click', '.remove_button', function (e) {
                    e.preventDefault();
                    count--;
                    $(this).parent('div').remove();
                    for (var i = 0; i < count; i++) {
                        var j = i+1
                        $('.step_span').eq(i).text('Step ' + j)
                    }
                })

                $('.button_add_serving').click(function() {
                    var value = $('.input_number_of_serving').val();
                    value++;
                    $('.input_number_of_serving').val(value);
                })

                $('.button_del_serving').click(function() {
                    var value = $('.input_number_of_serving').val();
                    if (value > 1) {
                        value--;
                        $('.input_number_of_serving').val(value);
                    }
                })
            });
        </script>

        <button class="button_add_step">
            Add step
        </button>
{% endblock %}